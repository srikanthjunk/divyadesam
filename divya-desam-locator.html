<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Divya Desam Locator - Find Nearest Sacred Temples</title>
    
    <!-- Leaflet CSS for maps -->
    <link rel="stylesheet" href="https://unpkg.com/leaflet@1.9.4/dist/leaflet.css" />
    
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, Oxygen, Ubuntu, sans-serif;
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            min-height: 100vh;
            padding: 20px;
        }

        .container {
            max-width: 1200px;
            margin: 0 auto;
        }

        .header {
            text-align: center;
            color: white;
            margin-bottom: 30px;
            animation: fadeInDown 0.8s ease;
        }

        .header h1 {
            font-size: 2.5rem;
            margin-bottom: 10px;
            text-shadow: 2px 2px 4px rgba(0,0,0,0.3);
        }

        .header p {
            font-size: 1.1rem;
            opacity: 0.95;
        }

        .main-content {
            display: grid;
            grid-template-columns: 1fr 1fr;
            gap: 20px;
            margin-bottom: 20px;
        }

        @media (max-width: 968px) {
            .main-content {
                grid-template-columns: 1fr;
            }
        }

        .left-panel {
            background: white;
            border-radius: 20px;
            padding: 30px;
            box-shadow: 0 20px 60px rgba(0,0,0,0.2);
            animation: fadeInUp 0.8s ease;
            max-height: 80vh;
            overflow-y: auto;
        }

        .map-container {
            background: white;
            border-radius: 20px;
            padding: 10px;
            box-shadow: 0 20px 60px rgba(0,0,0,0.2);
            animation: fadeInUp 0.8s ease;
            height: 80vh;
            position: sticky;
            top: 20px;
        }

        #map {
            height: 100%;
            width: 100%;
            border-radius: 15px;
        }

        .tab-buttons {
            display: flex;
            gap: 10px;
            margin-bottom: 20px;
        }

        .tab-btn {
            flex: 1;
            padding: 12px;
            background: white;
            border: 2px solid #667eea;
            color: #667eea;
            border-radius: 10px;
            cursor: pointer;
            transition: all 0.3s ease;
            font-weight: 500;
        }

        .tab-btn.active {
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            color: white;
            border-color: transparent;
        }

        .tab-content {
            display: none;
        }

        .tab-content.active {
            display: block;
        }

        .btn-locate {
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            color: white;
            border: none;
            padding: 15px 40px;
            font-size: 1.1rem;
            border-radius: 50px;
            cursor: pointer;
            transition: all 0.3s ease;
            display: block;
            margin: 0 auto 20px;
            box-shadow: 0 10px 30px rgba(102, 126, 234, 0.4);
        }

        .btn-locate:hover {
            transform: translateY(-2px);
            box-shadow: 0 15px 40px rgba(102, 126, 234, 0.5);
        }

        .autocomplete-container {
            position: relative;
            margin-bottom: 15px;
        }

        .route-input {
            width: 100%;
            padding: 12px 15px 12px 40px;
            border: 2px solid #e0e0e0;
            border-radius: 10px;
            font-size: 1rem;
            transition: border-color 0.3s ease;
        }

        .route-input:focus {
            outline: none;
            border-color: #667eea;
        }

        .input-icon {
            position: absolute;
            left: 12px;
            top: 50%;
            transform: translateY(-50%);
            font-size: 1.2rem;
        }

        .autocomplete-list {
            position: absolute;
            top: 100%;
            left: 0;
            right: 0;
            background: white;
            border: 2px solid #e0e0e0;
            border-top: none;
            border-radius: 0 0 10px 10px;
            max-height: 200px;
            overflow-y: auto;
            display: none;
            z-index: 1000;
            box-shadow: 0 10px 30px rgba(0,0,0,0.1);
        }

        .autocomplete-list.active {
            display: block;
        }

        .autocomplete-item {
            padding: 10px 15px;
            cursor: pointer;
            transition: background-color 0.2s ease;
            border-bottom: 1px solid #f0f0f0;
        }

        .autocomplete-item:hover {
            background-color: #f8f9fa;
        }

        .autocomplete-item.selected {
            background-color: #e8eaf6;
        }

        .autocomplete-item .city-name {
            font-weight: 500;
            color: #333;
        }

        .autocomplete-item .city-state {
            font-size: 0.85rem;
            color: #666;
            margin-left: 10px;
        }

        .temple-card {
            background: white;
            border-radius: 15px;
            padding: 20px;
            margin-bottom: 15px;
            box-shadow: 0 10px 30px rgba(0,0,0,0.1);
            transition: all 0.3s ease;
            border-left: 4px solid #667eea;
            animation: slideIn 0.5s ease;
        }

        .temple-card:hover {
            transform: translateX(5px);
            box-shadow: 0 15px 40px rgba(0,0,0,0.15);
        }

        .temple-name {
            font-size: 1.2rem;
            color: #333;
            margin-bottom: 8px;
            font-weight: 600;
        }

        .temple-distance {
            color: #666;
            font-size: 0.95rem;
            margin-bottom: 12px;
        }

        .temple-distance strong {
            color: #667eea;
            font-size: 1.1rem;
        }

        .btn-navigate {
            background: linear-gradient(135deg, #11998e 0%, #38ef7d 100%);
            color: white;
            border: none;
            padding: 8px 20px;
            border-radius: 25px;
            cursor: pointer;
            text-decoration: none;
            display: inline-block;
            transition: all 0.3s ease;
            font-weight: 500;
            font-size: 0.9rem;
        }

        .btn-navigate:hover {
            transform: translateY(-2px);
            box-shadow: 0 10px 25px rgba(17, 153, 142, 0.3);
        }

        .loading {
            text-align: center;
            padding: 20px;
            color: #667eea;
        }

        .loading-spinner {
            border: 3px solid #f3f3f3;
            border-top: 3px solid #667eea;
            border-radius: 50%;
            width: 40px;
            height: 40px;
            animation: spin 1s linear infinite;
            margin: 0 auto 15px;
        }

        .error {
            background: #ff6b6b;
            color: white;
            padding: 15px;
            border-radius: 10px;
            text-align: center;
            margin-top: 20px;
        }

        .detour-slider {
            margin: 20px 0;
            padding: 15px;
            background: #f8f9fa;
            border-radius: 10px;
        }

        .slider {
            width: 100%;
            height: 6px;
            border-radius: 5px;
            background: #e0e0e0;
            outline: none;
            -webkit-appearance: none;
        }

        .slider::-webkit-slider-thumb {
            -webkit-appearance: none;
            appearance: none;
            width: 20px;
            height: 20px;
            border-radius: 50%;
            background: #667eea;
            cursor: pointer;
        }

        .route-summary {
            background: linear-gradient(135deg, #667eea15 0%, #764ba215 100%);
            padding: 15px;
            border-radius: 10px;
            margin-bottom: 20px;
        }

        .results-container {
            max-height: 400px;
            overflow-y: auto;
            padding-right: 10px;
        }

        .results-container::-webkit-scrollbar {
            width: 8px;
        }

        .results-container::-webkit-scrollbar-track {
            background: #f1f1f1;
            border-radius: 10px;
        }

        .results-container::-webkit-scrollbar-thumb {
            background: #667eea;
            border-radius: 10px;
        }

        @keyframes fadeInDown {
            from {
                opacity: 0;
                transform: translateY(-30px);
            }
            to {
                opacity: 1;
                transform: translateY(0);
            }
        }

        @keyframes fadeInUp {
            from {
                opacity: 0;
                transform: translateY(30px);
            }
            to {
                opacity: 1;
                transform: translateY(0);
            }
        }

        @keyframes slideIn {
            from {
                opacity: 0;
                transform: translateX(-20px);
            }
            to {
                opacity: 1;
                transform: translateX(0);
            }
        }

        @keyframes spin {
            0% { transform: rotate(0deg); }
            100% { transform: rotate(360deg); }
        }

        .legend {
            background: white;
            padding: 10px;
            border-radius: 8px;
            margin-top: 10px;
            font-size: 0.9rem;
        }

        .legend-item {
            display: flex;
            align-items: center;
            gap: 8px;
            margin: 5px 0;
        }

        .legend-color {
            width: 20px;
            height: 20px;
            border-radius: 50%;
        }
    </style>
</head>
<body>
    <div class="container">
        <div class="header">
            <h1>🛕 Divya Desam Locator</h1>
            <p>Interactive map and route planner for 108 sacred Vishnu temples</p>
        </div>

        <div class="main-content">
            <div class="left-panel">
                <div class="tab-buttons">
                    <button class="tab-btn active" onclick="switchTab('nearby')">📍 Nearby Temples</button>
                    <button class="tab-btn" onclick="switchTab('route')">🗺️ Route Planner</button>
                </div>

                <div id="nearbyTab" class="tab-content active">
                    <button class="btn-locate" onclick="findNearestTemples()">
                        📍 Find My Location
                    </button>
                    
                    <div class="loading" id="loading" style="display:none;">
                        <div class="loading-spinner"></div>
                        <p>Locating nearest temples...</p>
                    </div>

                    <div class="error" id="error" style="display:none;"></div>

                    <div class="results-container" id="nearbyResults"></div>
                </div>

                <div id="routeTab" class="tab-content">
                    <div class="autocomplete-container">
                        <span class="input-icon">📍</span>
                        <input type="text" 
                               id="startPoint" 
                               class="route-input" 
                               placeholder="Start typing city name..."
                               onkeyup="handleAutocomplete('start', this.value)"
                               onfocus="showAutocomplete('start')"
                               autocomplete="off">
                        <div id="startAutocomplete" class="autocomplete-list"></div>
                    </div>

                    <div class="autocomplete-container">
                        <span class="input-icon">🏁</span>
                        <input type="text" 
                               id="endPoint" 
                               class="route-input" 
                               placeholder="Destination city..."
                               onkeyup="handleAutocomplete('end', this.value)"
                               onfocus="showAutocomplete('end')"
                               autocomplete="off">
                        <div id="endAutocomplete" class="autocomplete-list"></div>
                    </div>

                    <div class="detour-slider">
                        <label style="display: block; margin-bottom: 10px; font-weight: 500;">
                            Maximum detour: <span id="detourValue">25</span> km
                        </label>
                        <input type="range" id="detourRange" class="slider" min="5" max="100" value="25" 
                               oninput="updateDetourValue(this.value)">
                    </div>

                    <button class="btn-locate" onclick="planRoute()">
                        🛕 Find Temples Along Route
                    </button>

                    <div id="routeLoading" style="display:none;" class="loading">
                        <div class="loading-spinner"></div>
                        <p>Planning your spiritual journey...</p>
                    </div>

                    <div id="routeError" style="display:none;" class="error"></div>

                    <div class="results-container" id="routeResults"></div>
                </div>

                <div class="legend">
                    <strong>Map Legend:</strong>
                    <div class="legend-item">
                        <div class="legend-color" style="background: #667eea;"></div>
                        <span>Divya Desam Temples</span>
                    </div>
                    <div class="legend-item">
                        <div class="legend-color" style="background: #ff6b6b;"></div>
                        <span>Your Location</span>
                    </div>
                    <div class="legend-item">
                        <div class="legend-color" style="background: #38ef7d;"></div>
                        <span>Selected Temple</span>
                    </div>
                </div>
            </div>

            <div class="map-container">
                <div id="map"></div>
            </div>
        </div>
    </div>

    <!-- Leaflet JS -->
    <script src="https://unpkg.com/leaflet@1.9.4/dist/leaflet.js"></script>
    
    <script>
        // Initialize map
        let map;
        let userMarker;
        let templeMarkers = [];
        let routeLine;
        let selectedMarker;

        // Cities database with coordinates
        const cities = [
            // Tamil Nadu
            { name: "Chennai", state: "Tamil Nadu", lat: 13.0827, lng: 80.2707 },
            { name: "Madurai", state: "Tamil Nadu", lat: 9.9252, lng: 78.1198 },
            { name: "Coimbatore", state: "Tamil Nadu", lat: 11.0168, lng: 76.9558 },
            { name: "Thanjavur", state: "Tamil Nadu", lat: 10.7870, lng: 79.1378 },
            { name: "Trichy", state: "Tamil Nadu", lat: 10.8505, lng: 78.6967 },
            { name: "Tiruchirappalli", state: "Tamil Nadu", lat: 10.8505, lng: 78.6967 },
            { name: "Kumbakonam", state: "Tamil Nadu", lat: 10.9617, lng: 79.3881 },
            { name: "Kanchipuram", state: "Tamil Nadu", lat: 12.8185, lng: 79.6947 },
            { name: "Srirangam", state: "Tamil Nadu", lat: 10.8620, lng: 78.6960 },
            { name: "Tirunelveli", state: "Tamil Nadu", lat: 8.7139, lng: 77.7567 },
            { name: "Rameswaram", state: "Tamil Nadu", lat: 9.2885, lng: 79.3129 },
            { name: "Kanyakumari", state: "Tamil Nadu", lat: 8.0883, lng: 77.5385 },
            { name: "Vellore", state: "Tamil Nadu", lat: 12.9165, lng: 79.1325 },
            { name: "Salem", state: "Tamil Nadu", lat: 11.6643, lng: 78.1460 },
            { name: "Erode", state: "Tamil Nadu", lat: 11.3410, lng: 77.7172 },
            { name: "Nagapattinam", state: "Tamil Nadu", lat: 10.7672, lng: 79.8449 },
            { name: "Chidambaram", state: "Tamil Nadu", lat: 11.3992, lng: 79.6935 },
            { name: "Mayiladuthurai", state: "Tamil Nadu", lat: 11.1018, lng: 79.6520 },
            { name: "Sirkazhi", state: "Tamil Nadu", lat: 11.2380, lng: 79.7340 },
            { name: "Tiruvallur", state: "Tamil Nadu", lat: 13.1231, lng: 79.9080 },
            { name: "Mahabalipuram", state: "Tamil Nadu", lat: 12.6172, lng: 80.1926 },
            { name: "Srivilliputhur", state: "Tamil Nadu", lat: 9.5120, lng: 77.6337 },
            { name: "Thoothukudi", state: "Tamil Nadu", lat: 8.7642, lng: 78.1348 },
            { name: "Sholinghur", state: "Tamil Nadu", lat: 13.1181, lng: 79.4200 },
            // Kerala
            { name: "Thiruvananthapuram", state: "Kerala", lat: 8.5241, lng: 76.9366 },
            { name: "Trivandrum", state: "Kerala", lat: 8.5241, lng: 76.9366 },
            { name: "Kochi", state: "Kerala", lat: 9.9312, lng: 76.2673 },
            { name: "Cochin", state: "Kerala", lat: 9.9312, lng: 76.2673 },
            { name: "Kozhikode", state: "Kerala", lat: 11.2588, lng: 75.7804 },
            { name: "Calicut", state: "Kerala", lat: 11.2588, lng: 75.7804 },
            { name: "Thrissur", state: "Kerala", lat: 10.5276, lng: 76.2144 },
            { name: "Kollam", state: "Kerala", lat: 8.8932, lng: 76.6141 },
            { name: "Palakkad", state: "Kerala", lat: 10.7867, lng: 76.6548 },
            { name: "Alappuzha", state: "Kerala", lat: 9.4981, lng: 76.3388 },
            { name: "Tiruvalla", state: "Kerala", lat: 9.3816, lng: 76.5775 },
            { name: "Chengannur", state: "Kerala", lat: 9.3189, lng: 76.6157 },
            // Karnataka
            { name: "Bangalore", state: "Karnataka", lat: 12.9716, lng: 77.5946 },
            { name: "Bengaluru", state: "Karnataka", lat: 12.9716, lng: 77.5946 },
            { name: "Mysore", state: "Karnataka", lat: 12.2958, lng: 76.6394 },
            { name: "Mysuru", state: "Karnataka", lat: 12.2958, lng: 76.6394 },
            { name: "Mangalore", state: "Karnataka", lat: 12.9141, lng: 74.8560 },
            { name: "Mangaluru", state: "Karnataka", lat: 12.9141, lng: 74.8560 },
            { name: "Hubli", state: "Karnataka", lat: 15.3647, lng: 75.1240 },
            { name: "Belgaum", state: "Karnataka", lat: 15.8497, lng: 74.4977 },
            { name: "Shimoga", state: "Karnataka", lat: 13.9299, lng: 75.5681 },
            // Andhra Pradesh & Telangana
            { name: "Hyderabad", state: "Telangana", lat: 17.3850, lng: 78.4867 },
            { name: "Tirupati", state: "Andhra Pradesh", lat: 13.6288, lng: 79.4192 },
            { name: "Vijayawada", state: "Andhra Pradesh", lat: 16.5062, lng: 80.6480 },
            { name: "Visakhapatnam", state: "Andhra Pradesh", lat: 17.6868, lng: 83.2185 },
            { name: "Guntur", state: "Andhra Pradesh", lat: 16.3067, lng: 80.4365 },
            { name: "Nellore", state: "Andhra Pradesh", lat: 14.4426, lng: 79.9865 },
            { name: "Ahobilam", state: "Andhra Pradesh", lat: 15.1342, lng: 78.6742 },
            { name: "Tirumala", state: "Andhra Pradesh", lat: 13.6833, lng: 79.3473 },
            // Union Territory
            { name: "Puducherry", state: "Puducherry", lat: 11.9416, lng: 79.8083 },
            { name: "Pondicherry", state: "Puducherry", lat: 11.9416, lng: 79.8083 },
            // North India
            { name: "Delhi", state: "Delhi", lat: 28.6139, lng: 77.2090 },
            { name: "New Delhi", state: "Delhi", lat: 28.6139, lng: 77.2090 },
            { name: "Mathura", state: "Uttar Pradesh", lat: 27.4924, lng: 77.6737 },
            { name: "Vrindavan", state: "Uttar Pradesh", lat: 27.5815, lng: 77.6968 },
            { name: "Gokul", state: "Uttar Pradesh", lat: 27.4425, lng: 77.7211 },
            { name: "Ayodhya", state: "Uttar Pradesh", lat: 26.7922, lng: 82.1998 },
            { name: "Varanasi", state: "Uttar Pradesh", lat: 25.3176, lng: 82.9739 },
            { name: "Lucknow", state: "Uttar Pradesh", lat: 26.8467, lng: 80.9462 },
            { name: "Agra", state: "Uttar Pradesh", lat: 27.1767, lng: 78.0081 },
            { name: "Naimisaranya", state: "Uttar Pradesh", lat: 27.1287, lng: 80.5308 },
            // Uttarakhand
            { name: "Badrinath", state: "Uttarakhand", lat: 30.7433, lng: 79.4938 },
            { name: "Haridwar", state: "Uttarakhand", lat: 29.9457, lng: 78.1642 },
            { name: "Rishikesh", state: "Uttarakhand", lat: 30.0869, lng: 78.2676 },
            { name: "Devprayag", state: "Uttarakhand", lat: 30.1461, lng: 78.5989 },
            { name: "Nandaprayag", state: "Uttarakhand", lat: 30.3286, lng: 79.3269 },
            // Gujarat
            { name: "Dwarka", state: "Gujarat", lat: 22.2376, lng: 68.9674 },
            { name: "Ahmedabad", state: "Gujarat", lat: 23.0225, lng: 72.5714 },
            { name: "Surat", state: "Gujarat", lat: 21.1702, lng: 72.8311 },
            { name: "Vadodara", state: "Gujarat", lat: 22.3072, lng: 73.1812 },
            { name: "Rajkot", state: "Gujarat", lat: 22.3039, lng: 70.8022 }
        ];

        // Initialize the map
        function initMap() {
            map = L.map('map').setView([13.0827, 80.2707], 7); // Center on Tamil Nadu
            
            // Add OpenStreetMap tiles
            L.tileLayer('https://{s}.tile.openstreetmap.org/{z}/{x}/{y}.png', {
                attribution: '© OpenStreetMap contributors',
                maxZoom: 19
            }).addTo(map);

            // Add all temple markers to the map
            addTempleMarkers();
        }

        // Add temple markers to map
        function addTempleMarkers() {
            const templeIcon = L.divIcon({
                html: '<div style="background: #667eea; width: 12px; height: 12px; border-radius: 50%; border: 2px solid white;"></div>',
                iconSize: [16, 16],
                className: 'temple-marker'
            });

            divyaDesams.forEach(temple => {
                const marker = L.marker([temple.lat, temple.lng], {
                    icon: templeIcon,
                    title: temple.displayName
                }).addTo(map);
                
                marker.bindPopup(`
                    <strong>${temple.displayName}</strong><br>
                    <a href="${temple.link}" target="_blank" class="btn-navigate" style="margin-top: 10px; display: inline-block;">
                        Navigate
                    </a>
                `);
                
                templeMarkers.push(marker);
            });
        }

        // Switch between tabs
        function switchTab(tab) {
            const tabs = document.querySelectorAll('.tab-content');
            const buttons = document.querySelectorAll('.tab-btn');
            
            tabs.forEach(t => t.classList.remove('active'));
            buttons.forEach(b => b.classList.remove('active'));
            
            if (tab === 'nearby') {
                document.getElementById('nearbyTab').classList.add('active');
                buttons[0].classList.add('active');
            } else {
                document.getElementById('routeTab').classList.add('active');
                buttons[1].classList.add('active');
            }
        }

        // Handle autocomplete
        function handleAutocomplete(type, value) {
            const listId = type + 'Autocomplete';
            const list = document.getElementById(listId);
            
            if (value.length < 2) {
                list.classList.remove('active');
                return;
            }
            
            const filtered = cities.filter(city => 
                city.name.toLowerCase().includes(value.toLowerCase()) ||
                city.state.toLowerCase().includes(value.toLowerCase())
            ).slice(0, 10);
            
            if (filtered.length > 0) {
                list.innerHTML = filtered.map(city => `
                    <div class="autocomplete-item" onclick="selectCity('${type}', '${city.name}', ${city.lat}, ${city.lng})">
                        <span class="city-name">${city.name}</span>
                        <span class="city-state">${city.state}</span>
                    </div>
                `).join('');
                list.classList.add('active');
            } else {
                list.classList.remove('active');
            }
        }

        // Show autocomplete on focus
        function showAutocomplete(type) {
            const input = document.getElementById(type + 'Point');
            if (input.value.length >= 2) {
                handleAutocomplete(type, input.value);
            }
        }

        // Select city from autocomplete
        function selectCity(type, name, lat, lng) {
            const input = document.getElementById(type + 'Point');
            const list = document.getElementById(type + 'Autocomplete');
            
            input.value = name;
            input.dataset.lat = lat;
            input.dataset.lng = lng;
            list.classList.remove('active');
            
            // Add marker on map
            if (type === 'start') {
                if (window.startMarker) map.removeLayer(window.startMarker);
                window.startMarker = L.marker([lat, lng], {
                    icon: L.divIcon({
                        html: '<div style="background: #38ef7d; width: 16px; height: 16px; border-radius: 50%; border: 3px solid white;"></div>',
                        iconSize: [22, 22]
                    })
                }).addTo(map);
            } else {
                if (window.endMarker) map.removeLayer(window.endMarker);
                window.endMarker = L.marker([lat, lng], {
                    icon: L.divIcon({
                        html: '<div style="background: #ff6b6b; width: 16px; height: 16px; border-radius: 50%; border: 3px solid white;"></div>',
                        iconSize: [22, 22]
                    })
                }).addTo(map);
            }
        }

        // Hide autocomplete when clicking outside
        document.addEventListener('click', function(e) {
            if (!e.target.closest('.autocomplete-container')) {
                document.querySelectorAll('.autocomplete-list').forEach(list => {
                    list.classList.remove('active');
                });
            }
        });

        // Update detour value display
        function updateDetourValue(value) {
            document.getElementById('detourValue').textContent = value;
        }

        // Calculate distance between two points
        function calculateDistance(lat1, lon1, lat2, lon2) {
            const R = 6371; // Radius of Earth in km
            const dLat = deg2rad(lat2 - lat1);
            const dLon = deg2rad(lon2 - lon1);
            const a = 
                Math.sin(dLat/2) * Math.sin(dLat/2) +
                Math.cos(deg2rad(lat1)) * Math.cos(deg2rad(lat2)) * 
                Math.sin(dLon/2) * Math.sin(dLon/2);
            const c = 2 * Math.atan2(Math.sqrt(a), Math.sqrt(1-a));
            return R * c;
        }

        function deg2rad(deg) {
            return deg * (Math.PI/180);
        }

        // Find nearest temples to user location
        function findNearestTemples() {
            const loading = document.getElementById('loading');
            const error = document.getElementById('error');
            const results = document.getElementById('nearbyResults');
            
            loading.style.display = 'block';
            error.style.display = 'none';
            results.innerHTML = '';

            if (navigator.geolocation) {
                navigator.geolocation.getCurrentPosition(
                    position => {
                        const userLat = position.coords.latitude;
                        const userLng = position.coords.longitude;
                        
                        // Add user marker
                        if (userMarker) map.removeLayer(userMarker);
                        userMarker = L.marker([userLat, userLng], {
                            icon: L.divIcon({
                                html: '<div style="background: #ff6b6b; width: 16px; height: 16px; border-radius: 50%; border: 3px solid white; box-shadow: 0 2px 6px rgba(0,0,0,0.3);"></div>',
                                iconSize: [22, 22]
                            })
                        }).addTo(map);
                        
                        map.setView([userLat, userLng], 10);
                        
                        // Calculate distances
                        const templesWithDistance = divyaDesams.map(temple => ({
                            ...temple,
                            distance: calculateDistance(userLat, userLng, temple.lat, temple.lng)
                        })).sort((a, b) => a.distance - b.distance);
                        
                        // Display results
                        displayNearbyTemples(templesWithDistance.slice(0, 10));
                        loading.style.display = 'none';
                    },
                    err => {
                        loading.style.display = 'none';
                        error.style.display = 'block';
                        error.innerHTML = 'Location access denied. Please enable location services or use the Route Planner tab to manually enter your location.';
                    }
                );
            } else {
                loading.style.display = 'none';
                error.style.display = 'block';
                error.innerHTML = 'Geolocation is not supported by your browser.';
            }
        }

        // Display nearby temples
        function displayNearbyTemples(temples) {
            const results = document.getElementById('nearbyResults');
            
            let html = '<h3 style="margin-bottom: 15px; color: #667eea;">Nearest Divya Desams:</h3>';
            
            temples.forEach((temple, index) => {
                html += `
                    <div class="temple-card" style="animation-delay: ${index * 0.1}s;">
                        <div class="temple-name">${index + 1}. ${temple.displayName}</div>
                        <div class="temple-distance">
                            <strong>${temple.distance.toFixed(1)} km</strong> away
                        </div>
                        <a href="${temple.link}" target="_blank" class="btn-navigate">
                            🗺️ Navigate
                        </a>
                    </div>
                `;
            });
            
            results.innerHTML = html;
        }

        // Plan route between two points
        function planRoute() {
            const startInput = document.getElementById('startPoint');
            const endInput = document.getElementById('endPoint');
            const detourDistance = parseInt(document.getElementById('detourRange').value);
            
            if (!startInput.dataset.lat || !endInput.dataset.lat) {
                alert('Please select both start and end points from the dropdown suggestions');
                return;
            }
            
            const startLat = parseFloat(startInput.dataset.lat);
            const startLng = parseFloat(startInput.dataset.lng);
            const endLat = parseFloat(endInput.dataset.lat);
            const endLng = parseFloat(endInput.dataset.lng);
            
            document.getElementById('routeLoading').style.display = 'block';
            document.getElementById('routeError').style.display = 'none';
            document.getElementById('routeResults').innerHTML = '';
            
            // Draw route line on map
            if (routeLine) map.removeLayer(routeLine);
            routeLine = L.polyline([
                [startLat, startLng],
                [endLat, endLng]
            ], {
                color: '#667eea',
                weight: 3,
                opacity: 0.7,
                dashArray: '10, 10'
            }).addTo(map);
            
            // Fit map to show route
            map.fitBounds([[startLat, startLng], [endLat, endLng]], { padding: [50, 50] });
            
            // Find temples along route
            const routePoints = getPointsAlongRoute(
                { lat: startLat, lng: startLng },
                { lat: endLat, lng: endLng },
                20
            );
            
            const templesAlongRoute = [];
            
            divyaDesams.forEach(temple => {
                let minDistance = Infinity;
                
                routePoints.forEach(point => {
                    const distance = calculateDistance(point.lat, point.lng, temple.lat, temple.lng);
                    if (distance < minDistance) {
                        minDistance = distance;
                    }
                });
                
                if (minDistance <= detourDistance) {
                    templesAlongRoute.push({
                        ...temple,
                        detourDistance: minDistance,
                        distanceFromStart: calculateDistance(startLat, startLng, temple.lat, temple.lng)
                    });
                }
            });
            
            // Sort by distance from start
            templesAlongRoute.sort((a, b) => a.distanceFromStart - b.distanceFromStart);
            
            displayRouteResults(startInput.value, endInput.value, templesAlongRoute);
            document.getElementById('routeLoading').style.display = 'none';
        }

        // Get intermediate points along route
        function getPointsAlongRoute(start, end, numPoints) {
            const points = [];
            for (let i = 0; i <= numPoints; i++) {
                const fraction = i / numPoints;
                points.push({
                    lat: start.lat + (end.lat - start.lat) * fraction,
                    lng: start.lng + (end.lng - start.lng) * fraction
                });
            }
            return points;
        }

        // Display route results
        function displayRouteResults(startName, endName, temples) {
            const results = document.getElementById('routeResults');
            
            let html = `
                <div class="route-summary">
                    <h3>📍 ${startName} → ${endName}</h3>
                    <p>Found <strong>${temples.length} Divya Desams</strong> along your route</p>
                </div>
            `;
            
            if (temples.length === 0) {
                html += `
                    <div style="padding: 20px; background: #fff3cd; border-radius: 10px; text-align: center;">
                        <p>No Divya Desams found within the specified detour distance.</p>
                        <p>Try increasing the detour distance or choosing a different route.</p>
                    </div>
                `;
            } else {
                // Create Google Maps URL with waypoints
                const startPoint = document.getElementById('startPoint');
                const endPoint = document.getElementById('endPoint');
                const waypoints = temples.slice(0, 9).map(t => 
                    `${t.lat},${t.lng}`
                ).join('|');
                
                const mapsUrl = `https://www.google.com/maps/dir/${startPoint.dataset.lat},${startPoint.dataset.lng}/${waypoints}/${endPoint.dataset.lat},${endPoint.dataset.lng}`;
                
                html += `
                    <a href="${mapsUrl}" target="_blank" class="btn-navigate" style="display: block; text-align: center; margin: 15px 0;">
                        🗺️ Open Complete Route in Google Maps
                    </a>
                    
                    <h4 style="margin-top: 20px; color: #667eea;">Temples in order:</h4>
                `;
                
                temples.forEach((temple, index) => {
                    html += `
                        <div class="temple-card" style="animation-delay: ${index * 0.05}s;">
                            <div class="temple-name">${index + 1}. ${temple.displayName}</div>
                            <div class="temple-distance">
                                <strong>${temple.detourDistance.toFixed(1)} km</strong> detour • 
                                ${temple.distanceFromStart.toFixed(1)} km from start
                            </div>
                            <a href="${temple.link}" target="_blank" class="btn-navigate">
                                Navigate
                            </a>
                        </div>
                    `;
                });
            }
            
            results.innerHTML = html;
        }

        // Initialize map on page load
        window.onload = function() {
            initMap();
        };

        // Divya Desam temples data with accurate coordinates
        const divyaDesams = [
            // Chola Nadu Divya Desams (Around Trichy, Thanjavur, Kumbakonam)
            { name: "ThiruArangam", displayName: "Sri Ranganathaswamy Temple, Srirangam", lat: 10.8620, lng: 78.6960, link: "https://www.google.com/maps/search/?api=1&query=Sri+Ranganathaswamy+Temple,+Srirangam" },
            { name: "ThiruKoazhi", displayName: "Nachiyar Koil", lat: 10.9485, lng: 79.4745, link: "https://www.google.com/maps/search/?api=1&query=Nachiyar+Koil,+Thirunaraiyur" },
            { name: "ThiruKarambanoor", displayName: "Uthamar Kovil", lat: 10.8145, lng: 78.8985, link: "https://www.google.com/maps/search/?api=1&query=Uthamar+Kovil,+Pichandar+Koil" },
            { name: "ThiruVellarai", displayName: "Pundarikakshan Perumal Temple", lat: 10.8533, lng: 78.5742, link: "https://www.google.com/maps/search/?api=1&query=Pundarikakshan+Perumal+Temple,+Thiruvellarai" },
            { name: "ThiruAnbil", displayName: "Sundararaja Perumal Temple, Anbil", lat: 10.8372, lng: 78.8158, link: "https://www.google.com/maps/search/?api=1&query=Sundararaja+Perumal+Temple,+Anbil" },
            { name: "ThiruPer Nagar", displayName: "Appakkudathaan Perumal Temple", lat: 10.8645, lng: 78.7810, link: "https://www.google.com/maps/search/?api=1&query=Appakkudathaan+Perumal+Temple,+Koviladi" },
            { name: "ThiruKandiyur", displayName: "Hara Saabha Vimocchana Temple", lat: 11.0740, lng: 79.4525, link: "https://www.google.com/maps/search/?api=1&query=Hara+Saabha+Vimocchana+Perumal+Temple,+Kandiyur" },
            { name: "ThiruKoodalur", displayName: "Aduthurai Perumal Kovil", lat: 10.9945, lng: 79.4819, link: "https://www.google.com/maps/search/?api=1&query=Aduthurai+Perumal+Kovil,+Thirukoodalur" },
            { name: "ThiruKavithalam", displayName: "Gajendra Varadha Temple", lat: 10.9729, lng: 79.3740, link: "https://www.google.com/maps/search/?api=1&query=Gajendra+Varadha+Perumal+Temple,+Kabisthalam" },
            { name: "ThiruPullam boothangudi", displayName: "Valvil Raman Temple", lat: 10.9344, lng: 79.2511, link: "https://www.google.com/maps/search/?api=1&query=Valvil+Raman+Perumal+Temple,+Pullabhoothangudi" },
            { name: "ThiruAthanoor", displayName: "Aandalum Akkum Aayan Temple", lat: 10.8856, lng: 79.3642, link: "https://www.google.com/maps/search/?api=1&query=Aandalum+Akkum+Aayan+Perumal+Temple,+Athanoor" },
            { name: "ThiruKudanthai", displayName: "Sarangapani Temple, Kumbakonam", lat: 10.9617, lng: 79.3881, link: "https://www.google.com/maps/search/?api=1&query=Sarangapani+Temple,+Kumbakonam" },
            { name: "ThiruVinnagar", displayName: "Oppiliappan Temple", lat: 10.9156, lng: 79.2997, link: "https://www.google.com/maps/search/?api=1&query=Oppiliappan+Temple,+Thirunageswaram,+Kumbakonam" },
            { name: "ThiruNaraiyur", displayName: "Nachiyar Koil, Thirunaraiyur", lat: 10.9485, lng: 79.4745, link: "https://www.google.com/maps/search/?api=1&query=Nachiyar+Koil,+Thirunaraiyur" },
            { name: "ThiruCherai", displayName: "Saranathan Perumal Temple", lat: 10.9313, lng: 79.2850, link: "https://www.google.com/maps/search/?api=1&query=Saranathan+Perumal+Temple,+Thirucherai" },
            { name: "ThiruKannamangai", displayName: "Bhaktavatsala Perumal Temple", lat: 10.8583, lng: 79.0750, link: "https://www.google.com/maps/search/?api=1&query=Bhaktavatsala+Perumal+Temple,+Thirukannamangai" },
            { name: "ThiruKannapuram", displayName: "Neelamegha Perumal Temple", lat: 10.8944, lng: 79.2197, link: "https://www.google.com/maps/search/?api=1&query=Neelamegha+Perumal+Temple,+Thirukannapuram" },
            { name: "ThiruKannangudi", displayName: "Lokanantha Perumal Temple", lat: 10.3517, lng: 79.4183, link: "https://www.google.com/maps/search/?api=1&query=Lokanantha+Perumal+Temple,+Thirukannangudi" },
            { name: "ThiruNaagai", displayName: "Soundararaja Temple, Nagapattinam", lat: 10.7672, lng: 79.8449, link: "https://www.google.com/maps/search/?api=1&query=Soundararajaperumal+Temple,+Nagapattinam" },
            { name: "ThiruThanjai Maamani Kovil", displayName: "Thanjai Maamani Koil", lat: 10.7870, lng: 79.1378, link: "https://www.google.com/maps/search/?api=1&query=Thanjai+Maamani+Koil,+Thanjavur" },
            { name: "ThiruNandipura Vinnagaram", displayName: "Nathan Kovil, Thanjavur", lat: 10.8150, lng: 79.1100, link: "https://www.google.com/maps/search/?api=1&query=Nathan+Kovil,+Jagannatha+Perumal,+Thanjavur" },
            { name: "ThiruVelliyangudi", displayName: "Kola Valvilli Ramar Temple", lat: 10.5889, lng: 79.0972, link: "https://www.google.com/maps/search/?api=1&query=Kola+Valvilli+Ramar+Temple,+Thiruvelliyangudi" },
            { name: "ThiruAzhundhur", displayName: "Devadiraja Perumal Temple", lat: 10.8800, lng: 79.2350, link: "https://www.google.com/maps/search/?api=1&query=Devadiraja+Perumal+Temple,+Therezhundur" },
            { name: "ThiruChirupuliyoor", displayName: "Arulmaakadal Perumal Temple", lat: 11.3981, lng: 79.7064, link: "https://www.google.com/maps/search/?api=1&query=Arulmaakadal+Perumal+Temple,+Sirupuliyur" },
            { name: "ThiruThalaichanganaanmadhiyam", displayName: "Naanmadhia Perumal Temple", lat: 11.1933, lng: 79.5500, link: "https://www.google.com/maps/search/?api=1&query=Naanmadhia+Perumal+Temple,+Thalaichangadu" },
            { name: "ThiruIndhalur", displayName: "Parimala Ranganathar Temple", lat: 11.1018, lng: 79.6520, link: "https://www.google.com/maps/search/?api=1&query=Parimala+Ranganathar+Temple,+Mayiladuthurai" },
            { name: "ThiruKavalambadi", displayName: "Gopalakrishna Perumal Temple", lat: 11.1670, lng: 79.4830, link: "https://www.google.com/maps/search/?api=1&query=Gopalakrishna+Perumal+Temple,+Thirukavalambadi" },
            // Sirkazhi cluster
            { name: "ThiruKaazhisrirama Vinnagaram", displayName: "Trivikrama Perumal Temple", lat: 11.2380, lng: 79.7340, link: "https://www.google.com/maps/search/?api=1&query=Trivikrama+Perumal+Temple,+Sirkazhi" },
            { name: "ThiruArimeya Vinnagaram", displayName: "Kudamudakoothan Temple", lat: 11.2450, lng: 79.7310, link: "https://www.google.com/maps/search/?api=1&query=Kudamudakoothan+Perumal+Temple,+Sirkazhi" },
            { name: "ThiruVanpurushothamam", displayName: "Purushothama Temple", lat: 11.2420, lng: 79.7290, link: "https://www.google.com/maps/search/?api=1&query=Purushothama+Perumal+Temple,+Sirkazhi" },
            { name: "ThiruSemponsei Kovil", displayName: "Sempon Sei Arangar Temple", lat: 11.2350, lng: 79.7380, link: "https://www.google.com/maps/search/?api=1&query=Sempon+Sei+Arangar+Temple,+Sirkazhi" },
            { name: "ThiruManimaada Kovil", displayName: "Narayana Temple", lat: 11.2410, lng: 79.7360, link: "https://www.google.com/maps/search/?api=1&query=Narayana+Perumal+Temple,+Thirumanimadam,+Sirkazhi" },
            { name: "ThiruVaikuntha Vinnagaram", displayName: "Vaikunda Natha Temple", lat: 11.2390, lng: 79.7320, link: "https://www.google.com/maps/search/?api=1&query=Vaikunda+Natha+Perumal+Temple,+Sirkazhi" },
            { name: "ThiruAali", displayName: "Thiruvali Thirunagari", lat: 11.2297, lng: 79.7486, link: "https://www.google.com/maps/search/?api=1&query=Thiruvali+Thirunagari+Temples" },
            { name: "ThiruThevanaarthogai", displayName: "Deivanayaga Temple", lat: 11.2360, lng: 79.7350, link: "https://www.google.com/maps/search/?api=1&query=Deivanayaga+Perumal+Temple,+Sirkazhi" },
            { name: "ThiruThetriyambalam", displayName: "Palli Konda Temple", lat: 11.2370, lng: 79.7330, link: "https://www.google.com/maps/search/?api=1&query=Palli+Konda+Perumal+Temple,+Sirkazhi" },
            { name: "ThiruManikkoodam", displayName: "Varadharaja Temple", lat: 11.2203, lng: 79.4547, link: "https://www.google.com/maps/search/?api=1&query=Varadharaja+Perumal+Temple,+Thirumanikkoodam" },
            { name: "ThiruVellakkulam", displayName: "Srinivasa Temple", lat: 11.2950, lng: 79.8325, link: "https://www.google.com/maps/search/?api=1&query=Srinivasa+Perumal+Temple,+Thiruvellakkulam" },
            { name: "ThiruParthan Palli", displayName: "Thamaraiyal Kelvan Temple", lat: 11.2700, lng: 79.5500, link: "https://www.google.com/maps/search/?api=1&query=Thamaraiyal+Kelvan+Perumal+Temple,+Thirupparthanpalli" },
            // Cuddalore region
            { name: "ThiruChithrakootam", displayName: "Govindaraja Temple, Chidambaram", lat: 11.3992, lng: 79.6935, link: "https://www.google.com/maps/search/?api=1&query=Govindaraja+Perumal+Temple,+Chidambaram" },
            { name: "ThiruAheendrapuram", displayName: "Devanatha Temple", lat: 11.5125, lng: 79.6333, link: "https://www.google.com/maps/search/?api=1&query=Devanatha+Perumal+Temple,+Thiruvahindrapuram" },
            { name: "ThiruKovalur", displayName: "Ulagalantha Temple, Tirukoyilur", lat: 11.9678, lng: 79.2042, link: "https://www.google.com/maps/search/?api=1&query=Ulagalantha+Perumal+Temple,+Tirukoyilur" },
            // Kanchipuram Divya Desams
            { name: "ThiruKachchi", displayName: "Varadharaja Temple, Kanchipuram", lat: 12.8318, lng: 79.7098, link: "https://www.google.com/maps/search/?api=1&query=Varadharaja+Perumal+Temple,+Kanchipuram" },
            { name: "ThiruAttabuyakaram", displayName: "Ashtabujakaram Temple", lat: 12.8372, lng: 79.7016, link: "https://www.google.com/maps/search/?api=1&query=Ashtabujakaram+Temple,+Kanchipuram" },
            { name: "ThiruThankaa", displayName: "Vilakkoli Temple", lat: 12.8356, lng: 79.7014, link: "https://www.google.com/maps/search/?api=1&query=Vilakkoli+Perumal+Temple,+Kanchipuram" },
            { name: "ThiruVelukkai", displayName: "Azhagiya Singar Temple", lat: 12.8430, lng: 79.7000, link: "https://www.google.com/maps/search/?api=1&query=Azhagiya+Singar+Perumal+Temple,+Kanchipuram" },
            { name: "ThiruNeeragam", displayName: "Neeragathan Temple", lat: 12.8458, lng: 79.6994, link: "https://www.google.com/maps/search/?api=1&query=Neeragathan+Temple,+Ulagalantha+Perumal+Temple,+Kanchipuram" },
            { name: "ThiruPaadagam", displayName: "Pandava Thoothar Temple", lat: 12.8426, lng: 79.7028, link: "https://www.google.com/maps/search/?api=1&query=Pandava+Thoothar+Perumal+Temple,+Kanchipuram" },
            { name: "ThiruNilathingal Thundam", displayName: "Nilathingal Thundathan", lat: 12.8444, lng: 79.7041, link: "https://www.google.com/maps/search/?api=1&query=Nilathingal+Thundathan+Perumal+Sannidhi,+Kanchipuram" },
            { name: "ThiruOoragam", displayName: "Ulagalantha Temple", lat: 12.8322, lng: 79.7136, link: "https://www.google.com/maps/search/?api=1&query=Ulagalantha+Perumal+Temple,+Kanchipuram" },
            { name: "ThiruVeggaa", displayName: "Yathothkari Temple", lat: 12.8433, lng: 79.7044, link: "https://www.google.com/maps/search/?api=1&query=Yathothkari+Perumal+Temple,+Kanchipuram" },
            { name: "ThiruKaragam", displayName: "Karunakara Temple", lat: 12.8369, lng: 79.7025, link: "https://www.google.com/maps/search/?api=1&query=Karunakara+Perumal+Temple,+Ulagalantha+Perumal+Temple,+Kanchipuram" },
            { name: "ThiruKarvanam", displayName: "Karvanar Temple", lat: 12.8433, lng: 79.7022, link: "https://www.google.com/maps/search/?api=1&query=Karvanar+Temple,+Ulagalantha+Perumal+Temple,+Kanchipuram" },
            { name: "ThiruKalvanur", displayName: "Kalvar Temple", lat: 12.8426, lng: 79.7031, link: "https://www.google.com/maps/search/?api=1&query=Kalvar+Perumal+Sannidhi,+Kamakshi+Amman+Temple,+Kanchipuram" },
            { name: "ThiruPavalavannam", displayName: "Pavalavannar Temple", lat: 12.8353, lng: 79.7016, link: "https://www.google.com/maps/search/?api=1&query=Pavalavannar+Temple,+Kanchipuram" },
            { name: "ThiruParameswara Vinnagaram", displayName: "Vaikunta Temple", lat: 12.8422, lng: 79.7022, link: "https://www.google.com/maps/search/?api=1&query=Vaikunta+Perumal+Temple,+Kanchipuram" },
            // Chennai region
            { name: "ThiruPutkuzhi", displayName: "Vijayaraghava Temple", lat: 12.7628, lng: 79.8061, link: "https://www.google.com/maps/search/?api=1&query=Vijayaraghava+Perumal+Temple,+Thiruputkuzhi" },
            { name: "ThiruNindravur", displayName: "Bhakthavatsala Temple", lat: 13.1186, lng: 80.0269, link: "https://www.google.com/maps/search/?api=1&query=Bhakthavatsala+Perumal+Temple,+Thirunindravur" },
            { name: "ThiruEvvul", displayName: "Veeraraghava Temple, Thiruvallur", lat: 13.1231, lng: 79.9080, link: "https://www.google.com/maps/search/?api=1&query=Veeraraghava+Perumal+Temple,+Thiruvallur" },
            { name: "ThiruAllikkeni", displayName: "Parthasarathy Temple, Chennai", lat: 13.0538, lng: 80.2757, link: "https://www.google.com/maps/search/?api=1&query=Parthasarathy+Temple,+Thiruvallikeni,+Chennai" },
            { name: "ThiruNeermalai", displayName: "Neervanna Temple", lat: 12.9686, lng: 80.1200, link: "https://www.google.com/maps/search/?api=1&query=Neervanna+Perumal+Temple,+Thiruneermalai" },
            { name: "ThiruIdaventhai", displayName: "Nithya Kalyana Temple", lat: 12.5431, lng: 80.1036, link: "https://www.google.com/maps/search/?api=1&query=Nithya+Kalyana+Perumal+Temple,+Thiruvidanthai" },
            { name: "ThiruKadanmallai", displayName: "Sthalasayana Temple, Mahabalipuram", lat: 12.6172, lng: 80.1926, link: "https://www.google.com/maps/search/?api=1&query=Sthalasayana+Perumal+Temple,+Mahabalipuram" },
            { name: "ThiruKadigai", displayName: "Yoga Narasimha Temple, Sholinghur", lat: 13.1181, lng: 79.4200, link: "https://www.google.com/maps/search/?api=1&query=Yoga+Narasimha+Swamy+Temple,+Sholinghur" },
            // Vada Nadu (North India)
            { name: "ThiruAyodhi", displayName: "Ram Janmabhoomi, Ayodhya", lat: 26.7922, lng: 82.1998, link: "https://www.google.com/maps/search/?api=1&query=Ayodhya,+Uttar+Pradesh" },
            { name: "ThiruNaimisaranyam", displayName: "Naimisaranya", lat: 27.1287, lng: 80.5308, link: "https://www.google.com/maps/search/?api=1&query=Naimisaranya,+Uttar+Pradesh" },
            { name: "ThiruPiruthi", displayName: "Nandaprayag", lat: 30.3286, lng: 79.3269, link: "https://www.google.com/maps/search/?api=1&query=Nandaprayag,+Uttarakhand" },
            { name: "ThiruKandamennum Kadinagar", displayName: "Devprayag", lat: 30.1461, lng: 78.5989, link: "https://www.google.com/maps/search/?api=1&query=Devprayag,+Uttarakhand" },
            { name: "ThiruVadari", displayName: "Badrinath Temple", lat: 30.7433, lng: 79.4938, link: "https://www.google.com/maps/search/?api=1&query=Badrinath+Temple,+Uttarakhand" },
            { name: "ThiruSalagraamam", displayName: "Muktinath Temple, Nepal", lat: 28.8203, lng: 83.8708, link: "https://www.google.com/maps/search/?api=1&query=Muktinath+Temple,+Nepal" },
            { name: "ThiruVada Madurai", displayName: "Krishna Janmasthan, Mathura", lat: 27.4924, lng: 77.6737, link: "https://www.google.com/maps/search/?api=1&query=Mathura,+Uttar+Pradesh" },
            { name: "ThiruAyppaadi", displayName: "Gokul", lat: 27.4425, lng: 77.7211, link: "https://www.google.com/maps/search/?api=1&query=Gokul,+Uttar+Pradesh" },
            { name: "ThiruThuvarai", displayName: "Dwarkadhish Temple, Dwarka", lat: 22.2376, lng: 68.9674, link: "https://www.google.com/maps/search/?api=1&query=Dwarkadhish+Temple,+Dwarka,+Gujarat" },
            // Andhra Pradesh
            { name: "ThiruSingavelkundram", displayName: "Ahobilam", lat: 15.1342, lng: 78.6742, link: "https://www.google.com/maps/search/?api=1&query=Ahobilam,+Andhra+Pradesh" },
            { name: "ThiruVenkatam", displayName: "Venkateswara Temple, Tirumala", lat: 13.6833, lng: 79.3473, link: "https://www.google.com/maps/search/?api=1&query=Venkateswara+Temple,+Tirumala,+Andhra+Pradesh" },
            // Kerala Divya Desams
            { name: "ThiruNaavaai", displayName: "Navamukunda Temple, Tirunavaya", lat: 10.8833, lng: 75.9500, link: "https://www.google.com/maps/search/?api=1&query=Navamukunda+Temple,+Tirunavaya,+Kerala" },
            { name: "ThiruViththuvakkodu", displayName: "Uyyavantha Temple", lat: 10.9456, lng: 76.0739, link: "https://www.google.com/maps/search/?api=1&query=Uyyavantha+Perumal+Temple,+Thiruvithuvacode,+Kerala" },
            { name: "ThiruKaatkarai", displayName: "Thrikkakara Vamana Temple", lat: 10.0167, lng: 76.3333, link: "https://www.google.com/maps/search/?api=1&query=Thrikkakara+Vamana+Moorthy+Temple,+Kerala" },
            { name: "ThiruMoozhikkalam", displayName: "Moozhikkulam Lakshmana Temple", lat: 10.1422, lng: 76.3083, link: "https://www.google.com/maps/search/?api=1&query=Moozhikkulam+Lakshmana+Perumal+Temple,+Kerala" },
            { name: "ThiruVallavaazh", displayName: "Sreevallabha Temple, Tiruvalla", lat: 9.3816, lng: 76.5775, link: "https://www.google.com/maps/search/?api=1&query=Sreevallabha+Temple,+Tiruvalla,+Kerala" },
            { name: "ThiruKadithaanam", displayName: "Thrikodithanam Mahavishnu Temple", lat: 9.4939, lng: 76.5972, link: "https://www.google.com/maps/search/?api=1&query=Thrikodithanam+Mahavishnu+Temple,+Kerala" },
            { name: "ThiruChenkundrur", displayName: "Imayavarappan Temple, Chengannur", lat: 9.3189, lng: 76.6157, link: "https://www.google.com/maps/search/?api=1&query=Imayavarappan+Perumal+Temple,+Chengannur,+Kerala" },
            { name: "ThiruPuliyur", displayName: "Thirupuliyur Mahavishnu Temple", lat: 9.1750, lng: 76.7167, link: "https://www.google.com/maps/search/?api=1&query=Thirupuliyur+Mahavishnu+Temple,+Kerala" },
            { name: "ThiruVaaranvilai", displayName: "Aranmula Parthasarathy Temple", lat: 9.3347, lng: 76.6222, link: "https://www.google.com/maps/search/?api=1&query=Aranmula+Parthasarathy+Temple,+Kerala" },
            { name: "ThiruVanvandur", displayName: "Thiruvanvandoor Mahavishnu Temple", lat: 9.2167, lng: 76.7000, link: "https://www.google.com/maps/search/?api=1&query=Thiruvanvandoor+Mahavishnu+Temple,+Kerala" },
            { name: "ThiruAnanthapuram", displayName: "Padmanabhaswamy Temple, Thiruvananthapuram", lat: 8.4828, lng: 76.9436, link: "https://www.google.com/maps/search/?api=1&query=Padmanabhaswamy+Temple,+Thiruvananthapuram,+Kerala" },
            // Pandya Nadu (Southern Tamil Nadu)
            { name: "ThiruVaattaaru", displayName: "Adikesava Temple, Thiruvattar", lat: 8.2575, lng: 77.2625, link: "https://www.google.com/maps/search/?api=1&query=Adikesava+Perumal+Temple,+Thiruvattar,+Tamil+Nadu" },
            { name: "ThiruVannparisaaram", displayName: "Thiruvazhmarban Temple", lat: 8.3489, lng: 77.3589, link: "https://www.google.com/maps/search/?api=1&query=Thiruvazhmarban+Temple,+Thirupathisaram,+Tamil+Nadu" },
            { name: "ThiruKurungudi", displayName: "Azhagiya Nambi Temple", lat: 8.3503, lng: 77.6511, link: "https://www.google.com/maps/search/?api=1&query=Azhagiya+Nambi+Perumal+Temple,+Thirukkurungudi" },
            { name: "ThiruChireevaramangai", displayName: "Vanamamalai Temple", lat: 8.4931, lng: 77.6731, link: "https://www.google.com/maps/search/?api=1&query=Vanamamalai+Perumal+Temple,+Nanguneri" },
            // Nava Tirupathi (9 temples)
            { name: "ThiruVaikuntam", displayName: "Sri Vaikuntanatha Temple", lat: 8.6344, lng: 77.9128, link: "https://www.google.com/maps/search/?api=1&query=Nava+Tirupathi,+Srivaikuntam,+Thoothukudi" },
            { name: "ThiruVaragunamangai", displayName: "Vijayasana Temple", lat: 8.6189, lng: 77.9292, link: "https://www.google.com/maps/search/?api=1&query=Nava+Tirupathi,+Srivaikuntam,+Thoothukudi" },
            { name: "ThiruPulingudi", displayName: "Kaichina Vendha Temple", lat: 8.6133, lng: 77.8950, link: "https://www.google.com/maps/search/?api=1&query=Nava+Tirupathi,+Srivaikuntam,+Thoothukudi" },
            { name: "ThiruThulaivillimangalam", displayName: "Devapiran Temple", lat: 8.5644, lng: 77.8472, link: "https://www.google.com/maps/search/?api=1&query=Nava+Tirupathi,+Srivaikuntam,+Thoothukudi" },
            { name: "ThiruKulandhai", displayName: "Mayakoothan Temple", lat: 8.6044, lng: 77.8672, link: "https://www.google.com/maps/search/?api=1&query=Nava+Tirupathi,+Srivaikuntam,+Thoothukudi" },
            { name: "ThiruKolur", displayName: "Vaithamanidhi Temple", lat: 8.6544, lng: 77.9072, link: "https://www.google.com/maps/search/?api=1&query=Nava+Tirupathi,+Srivaikuntam,+Thoothukudi" },
            { name: "ThiruPerai", displayName: "Makara Nedunkuzhai Temple", lat: 8.5844, lng: 77.8172, link: "https://www.google.com/maps/search/?api=1&query=Nava+Tirupathi,+Srivaikuntam,+Thoothukudi" },
            { name: "ThiruKurugur", displayName: "Azhwar Thirunagari", lat: 8.6044, lng: 77.9572, link: "https://www.google.com/maps/search/?api=1&query=Nava+Tirupathi,+Alwarthirunagari,+Thoothukudi" },
            { name: "ThiruVilliputhur", displayName: "Srivilliputhur Andal Temple", lat: 9.5120, lng: 77.6337, link: "https://www.google.com/maps/search/?api=1&query=Srivilliputhur+Andal+Temple" },
            { name: "ThiruThankaal", displayName: "Ninra Narayana Temple", lat: 9.4847, lng: 77.8300, link: "https://www.google.com/maps/search/?api=1&query=Ninra+Narayana+Perumal+Temple,+Thiruthangal" },
            // Madurai region
            { name: "ThiruKudal", displayName: "Koodal Azhagar Temple, Madurai", lat: 9.9252, lng: 78.1198, link: "https://www.google.com/maps/search/?api=1&query=Koodal+Azhagar+Temple,+Madurai" },
            { name: "ThiruMaaliruncholai", displayName: "Alagar Kovil", lat: 10.2333, lng: 78.2167, link: "https://www.google.com/maps/search/?api=1&query=Alagar+Kovil,+Madurai" },
            { name: "ThiruMogur", displayName: "Kalamega Temple", lat: 10.0044, lng: 78.0203, link: "https://www.google.com/maps/search/?api=1&query=Kalamega+Perumal+Temple,+Thirumohur" },
            { name: "ThiruKottiyur", displayName: "Sowmya Narayana Temple", lat: 9.5233, lng: 78.0183, link: "https://www.google.com/maps/search/?api=1&query=Sowmya+Narayana+Perumal+Temple,+Thirukoshtiyur" },
            { name: "ThiruPullaani", displayName: "Adi Jagannatha Temple", lat: 9.2747, lng: 78.9256, link: "https://www.google.com/maps/search/?api=1&query=Adi+Jagannatha+Perumal+Temple,+Thiruppullani" },
            { name: "ThiruMeyyam", displayName: "Sathyamurthi Temple", lat: 10.2472, lng: 78.7489, link: "https://www.google.com/maps/search/?api=1&query=Sathyamurthi+Perumal+Temple,+Thirumayam" }